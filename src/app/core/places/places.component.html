<agm-map class="agm-map" [latitude]="lat" [longitude]="lng" [zoom]="14">
  <agm-marker *ngFor="let place of places | async"
              [latitude]="place.latitude"
              [longitude]="place.longitude"
              [iconUrl]="getCategoryImagePath(place.category)">
    <agm-info-window [disableAutoPan]="true" #infoWindow>
      <div class="agm-info-window-content container" style="max-width: 400px;">
        <div class="row">
          <div class="col-md-6">
            <div class="row">
              <h4>{{place.name}}</h4>
            </div>
            <div class="row">
              <p>{{place.address}}</p>
            </div>
            <div class="row">
              <p>Open time: {{place.openTime}} - {{place.closeTime}}</p>
            </div>
            <div class="row">
              <p>Website:&nbsp;</p><a target="_blank" href="{{place.webUrl}}">{{ place.name }}</a>
            </div>
            <div *ngIf="auth.isSignedUp | async" class="row">
              <button type="button" class="btn btn-primary" [routerLink]="place.$key + '/details'">Details</button>
            </div>
            <br/>
            <div *ngIf="auth.isSignedUp | async" class="row">
              <button (click)="onAddToMyPlaces(place.$key, infoWindow)" class="btn btn-success"><i class="fa fa-plus" ></i>&nbsp;Add to my places</button>
            </div>
            <br/>
            <div class="row">
              <p #successMessage class="text-success" [ngClass]="showMessage ? '' : 'hidden-xs-up'">Place successfully added!</p>
            </div>
          </div>
          <div class="col-md-6">
            <div class="row">
              <img src="{{place.imagePath}}" alt="{{place.name}}" class="img-responsive" style="max-height: 150px;">
            </div>
          </div>
        </div>
      </div>
    </agm-info-window>
  </agm-marker>
</agm-map>
